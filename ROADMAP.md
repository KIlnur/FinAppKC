# Дорожная карта FinAppKC

## Фаза 1: MVP (текущая)

### Выполнено

- [x] Keycloak 26.1.4 с PostgreSQL
- [x] Kotlin SPI-плагины
  - [x] Rate Limited OTP Authenticator
  - [x] Audit Event Listener (структурированное логирование)
  - [x] Кастомные REST API-эндпоинты
- [x] Keycloakify-тема логина (React/TypeScript, интернационализация EN/RU)
- [x] Docker Compose с профилями (core, mail, monitoring, observability)
- [x] Демо-приложение Webapp (профиль, учётные данные, привязка соц. сетей, сессии, инспектор токенов)
- [x] WebAuthn Passwordless (Passkeys)
- [x] TOTP (условный OTP)
- [x] Google Social Login (только привязка)
- [x] Роли и группы (admin, agent, merchant, user)
- [x] Кастомный клиентский scope finapp-user-attributes
- [x] Дашборд Grafana (аудит Keycloak)
- [x] Стек мониторинга (Prometheus, Loki, Promtail, Grafana)
- [x] Стек наблюдаемости (OpenTelemetry Collector, Jaeger)
- [x] MailHog для тестирования email
- [x] Скрипты запуска (start.ps1, start.bat)
- [x] Скрипт пост-инициализации realm (init-realm.ps1)
- [x] Документация

### Запланировано

- [ ] E2E-тесты на Playwright
- [ ] Helm-чарт для Kubernetes
- [ ] Дополнительные дашборды Grafana (JVM, HTTP, БД)

---

## Фаза 2: Подготовка к production

### Безопасность

- [ ] Интеграция с внешним хранилищем секретов (Vault)
- [ ] mTLS между сервисами
- [ ] Сканирование безопасности в CI (Trivy, SAST)
- [ ] Тестирование на проникновение

### Масштабируемость

- [ ] Kubernetes Helm-чарт
- [ ] Horizontal Pod Autoscaler
- [ ] Пул соединений к БД (PgBouncer)
- [ ] CDN для ресурсов тем

### Наблюдаемость

- [ ] Правила алертинга (PagerDuty/Slack)
- [ ] Определение SLI/SLO
- [ ] Дополнительные дашборды

---

## Фаза 3: Расширение функциональности

### Аутентификация

- [ ] Аутентификация по magic link
- [ ] Дополнительные социальные провайдеры (Microsoft, GitHub)
- [ ] Федерация LDAP/AD
- [ ] Пошаговая аутентификация (step-up)

### Управление пользователями

- [ ] Управление организациями/тенантами
- [ ] Приглашения
- [ ] Массовые операции с пользователями

### Функции администрирования

- [ ] Кастомная тема администратора
- [ ] UI просмотра аудит-логов
- [ ] Дашборд аналитики пользователей

---

## Фаза 4: Корпоративные функции

### Мультитенантность

- [ ] Шаблоны realm
- [ ] Изоляция тенантов
- [ ] Брендирование по тенантам

### Соответствие требованиям

- [ ] Инструменты соответствия GDPR
- [ ] Экспорт/удаление данных
- [ ] Управление согласиями
- [ ] Политики хранения аудит-логов

### Интеграции

- [ ] Провижионинг SCIM
- [ ] SAML Identity Provider
- [ ] Интеграция с API-шлюзом

---

## Технический долг и улучшения

- [ ] Увеличить покрытие тестами до 80%+
- [ ] Бенчмарки производительности
- [ ] Документация кода (KDoc/JSDoc)
- [ ] GitOps с ArgoCD
- [ ] Канареечные развёртывания
- [ ] Документация API (OpenAPI)
